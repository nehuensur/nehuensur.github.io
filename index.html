<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nehuel Sur - Alquiler Temporario</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        :root {
            --primary-color: #004d40;
            --secondary-color: #00796b;
            --accent-color: #80cbc4;
            --background-light: #f0f2f5;
            --text-dark: #333;
            --text-light: #555;
            --card-shadow: 0 4px 15px rgba(0,0,0,0.1);
            --modal-shadow: 0 5px 20px rgba(0,0,0,0.3);
            --border-radius-soft: 10px;
            --border-radius-pill: 25px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: var(--background-light);
            color: var(--text-dark);
            line-height: 1.6;
        }

        header {
            background: var(--primary-color);
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        header img {
            height: 60px;
            margin-bottom: 10px;
        }
        header h1 {
            margin: 0;
            font-size: 2.5rem;
            letter-spacing: 1px;
        }
        header p {
            margin: 5px 0 0;
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Estilos para las PESTAÑAS de navegación */
        nav {
            display: flex; /* Usamos flexbox para que los botones estén en línea */
            justify-content: center; /* Centrar los botones */
            margin: 2rem 0;
            padding: 0 1rem;
            gap: 0; /* Eliminar el gap entre botones para que parezcan pestañas contiguas */
        }
        nav button {
            flex-grow: 1; /* Permite que los botones crezcan y ocupen el espacio disponible */
            max-width: 200px; /* Limitar el ancho máximo de cada pestaña */
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 0; /* Sin borde redondeado inicial */
            font-size: 1.1rem;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: none; /* Sin sombra inicial para simular pestaña */
            border-bottom: 3px solid transparent; /* Borde inferior para simular pestaña */
            position: relative;
            z-index: 1; /* Para que el borde de la pestaña activa no sea cubierto */
        }
        nav button:first-child {
            border-top-left-radius: var(--border-radius-soft); /* Redondear esquina superior izquierda */
            border-bottom-left-radius: var(--border-radius-soft);
        }
        nav button:last-child {
            border-top-right-radius: var(--border-radius-soft); /* Redondear esquina superior derecha */
            border-bottom-right-radius: var(--border-radius-soft);
        }

        nav button:hover {
            background-color: #00665c; /* Un tono un poco más oscuro al pasar el ratón */
            transform: none; /* Quitar la transformación al pasar el ratón para pestañas */
            box-shadow: none;
            border-bottom: 3px solid var(--accent-color); /* Resaltar con borde inferior */
        }
        nav button.active {
            background-color: var(--primary-color);
            border-bottom: 3px solid var(--accent-color); /* Borde inferior para la pestaña activa */
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1); /* Sombra superior para la pestaña activa */
            z-index: 2; /* Asegurar que la pestaña activa esté por encima */
            color: white;
        }

        .galeria {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            padding: 2rem;
        }

        .card {
            background: white;
            border-radius: var(--border-radius-soft);
            box-shadow: var(--card-shadow);
            overflow: hidden;
            width: 350px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        .card img {
            width: 100%;
            height: 240px;
            object-fit: cover;
            border-bottom: 1px solid #eee;
        }
        .card-body {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .card-body h3 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.6rem;
            margin-bottom: 0.75rem;
        }
        .card-body p {
            font-size: 1rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }
        .price-info {
            display: flex;
            align-items: baseline;
            margin-bottom: 1rem;
            flex-wrap: wrap; /* Para que se ajusten en línea pequeña */
        }
        .old-price {
            text-decoration: line-through;
            color: #999;
            font-size: 1.1rem;
            margin-right: 10px;
        }
        .current-price {
            color: #d32f2f;
            font-size: 1.5rem;
            font-weight: bold;
        }
        .card-body button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.9rem 1.8rem;
            border-radius: var(--border-radius-pill);
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            margin-top: 1rem;
        }
        .card-body button:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .amenities {
            font-size: 0.95rem;
            color: var(--text-light);
            margin: 0.75rem 0 1.5rem;
            list-style: none;
            padding-left: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
        }
        .amenities li::before {
            content: "✅ ";
            color: var(--secondary-color);
            margin-right: 8px;
        }

        /* Corrección: El modal debe estar oculto por defecto */
        .modal {
            display: none; /* Escondido por defecto */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            overflow-y: auto;
            opacity: 0; /* Para la transición de entrada */
            transition: opacity 0.3s ease-out;
        }
        .modal.is-open {
            display: flex; /* Mostrar cuando se le añade la clase is-open */
            opacity: 1; /* Animación de opacidad */
        }
        .modal-content {
            background: white;
            padding: 2.5rem;
            width: 90%;
            max-width: 800px;
            border-radius: var(--border-radius-soft);
            position: relative;
            box-shadow: var(--modal-shadow);
            max-height: 95vh;
            overflow-y: auto;
            transform: scale(0.95);
            transition: transform 0.3s ease-out;
        }
        .modal.is-open .modal-content {
            transform: scale(1);
        }

        .close-button {
            position: absolute;
            top: 15px;
            right: 25px;
            color: #aaa;
            font-size: 3rem;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .close-button:hover,
        .close-button:focus {
            color: #333;
            text-decoration: none;
        }

        .modal-body h2 {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .modal-body p strong {
            color: var(--text-dark);
        }

        /* Carrusel de imágenes */
        .carousel-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Ancho máximo para el carrusel */
            margin: 1.5rem auto; /* Centrar el carrusel en el modal */
            overflow: hidden;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease-in-out;
            width: 100%; /* Asegurar que el contenedor interno ocupe todo el ancho */
        }
        .carousel-item {
            min-width: 100%; /* Cada imagen ocupa el 100% del ancho del contenedor */
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .carousel-item img {
            width: 100%;
            height: 350px; /* Altura fija para las imágenes del carrusel */
            object-fit: cover;
            display: block; /* Eliminar espacio extra debajo de la imagen */
        }
        .carousel-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0,0,0,0.5);
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 10;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .carousel-control:hover {
            background-color: rgba(0,0,0,0.8);
        }
        .carousel-control.prev {
            left: 10px;
        }
        .carousel-control.next {
            right: 10px;
        }

        #mapaModal {
            width: 100%;
            height: 400px;
            border-radius: 5px;
            margin-top: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .modal-links {
            margin-top: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
        }
        .modal-links a {
            background-color: var(--secondary-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius-pill);
            text-decoration: none;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .modal-links a:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
        }
        /* Iconos de redes sociales para los links */
        .modal-links a[href*="booking"]::before { content: "🏨 "; }
        .modal-links a[href*="whatsapp"]::before { content: "📱 "; }
        .modal-links a[href*="facebook"]::before { content: "📘 "; }


        footer {
            background: var(--primary-color);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: 3rem;
            font-size: 1rem;
        }
        footer a {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: bold;
        }
        footer a:hover {
            text-decoration: underline;
        }

        /* Enlaces generales */
        a {
            color: var(--secondary-color);
            text-decoration: none;
            font-weight: bold;
        }
        a:hover {
            text-decoration: underline;
        }

        /* Media Queries para responsividad */
        @media (max-width: 992px) {
            .galeria {
                gap: 1.5rem;
                padding: 1.5rem;
            }
            .card {
                width: 320px;
            }
            .modal-content {
                max-width: 95%;
                padding: 2rem;
            }
            .carousel-container {
                max-width: 100%;
            }
            .carousel-item img {
                height: 300px;
            }
            #mapaModal {
                height: 300px;
            }
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }
            header p {
                font-size: 1rem;
            }
            nav {
                flex-wrap: wrap; /* Permite que los botones pasen a la siguiente línea */
                gap: 0.5rem; /* Pequeño gap cuando se envuelven */
            }
            nav button {
                flex-grow: unset; /* Quitar flex-grow para que no se estiren al envolver */
                width: calc(50% - 1rem); /* 2 botones por fila, con margen */
                margin: 0.25rem 0.5rem;
                border-radius: var(--border-radius-pill); /* Volver a redondear en móvil */
            }
            nav button:first-child,
            nav button:last-child {
                border-radius: var(--border-radius-pill);
            }
            nav button.active {
                border-bottom: 3px solid var(--accent-color);
            }

            .galeria {
                padding: 1rem;
                gap: 1rem;
            }
            .card {
                width: 95%;
                margin-bottom: 1rem;
            }
            .card-body h3 {
                font-size: 1.4rem;
            }
            .card-body p, .amenities li {
                font-size: 0.9rem;
            }
            .old-price {
                font-size: 1rem;
            }
            .current-price {
                font-size: 1.3rem;
            }
            .modal-content {
                padding: 1.5rem;
            }
            .close-button {
                font-size: 2.5rem;
                top: 10px;
                right: 20px;
            }
            .modal-body h2 {
                font-size: 1.6rem;
            }
            .amenities {
                grid-template-columns: 1fr;
                margin-bottom: 1rem;
            }
            .modal-links {
                flex-direction: column;
                align-items: stretch;
            }
            .modal-links a {
                justify-content: center;
            }
            .carousel-item img {
                height: 250px; /* Ajustar altura de carrusel en móvil */
            }
        }

        @media (max-width: 480px) {
            nav button {
                width: calc(100% - 1rem); /* Un botón por fila */
            }
        }
    </style>
</head>
<body>
    <header>
        <img src="img/logo.png" alt="Nehuel Sur Logo">
        <h1>Bienvenido a Nehuel Sur</h1>
        <p>Alquiler Temporario en toda Argentina</p>
    </header>
    <img src="img/header.png" alt="Imagen Header" style="width: 100%; max-height: 300px; object-fit: cover;">
    <nav>
        <button id="btn-departamentos" onclick="filtrar('departamento')">Departamentos</button>
        <button id="btn-cabanas" onclick="filtrar('cabaña')">Cabañas</button>
    </nav>
    <div class="galeria" id="galeria"></div>

    <div id="modal" class="modal" onclick="cerrarModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-button" onclick="cerrarModalManual()">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <footer>
        <p>Contacto: <a href="https://wa.me/542612640766" target="_blank">WhatsApp</a> | <a href="https://www.facebook.com/profile.php?id=61577311958402" target="_blank">Facebook</a></p>
    </footer>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
        const datos = {
  "contacto": {
    "whatsapp": "+542612640766",
    "facebook": "https://www.facebook.com/profile.php?id=61577311958402"
  },
  "propiedades": [
    {
      "tipo": "cabaña",
      "titulo": "Casa Bamba",
      "descripcion": "Casa Bamba, que cuenta con vistas a la ciudad, dispone de alojamiento con patio y hervidor, y está a unos 2,4 km de Centro Cívico. El alojamiento, que se encuentra a 2,2 km de Playa del Centro, ofrece jardín y parking privado gratis.\n\nLa casa o chalet de 2 dormitorios cuenta con cocina con nevera y horno, y 2 baños con bidet y ducha. Se ofrece TV de pantalla plana, además de reproductor de CD.\n\nSerena Bay está a 11 km del alojamiento, y Parque Nahuelito está a 23 km. El aeropuerto (Aeropuerto San Carlos de Bariloche) está a 16 km.",
      "ubicacion": {
        "latitud": -41.140112,
        "longitud": -71.323941
      },
      "direccion": "1038 Luisa G. de Runge, 8400 San Carlos de Bariloche, Argentina",
      "imagenes": [
        "https://cf.bstatic.com/xdata/images/hotel/max1024x768/417294725.jpg?k=4609b81cfa2446933733b45cbdd2d06407a9edac2801935ce2a06ec7f2aab1f8&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307135.jpg?k=e90fd3325921718216fc2a5bdceaad19fa5d86e57efb519c1ce823522e358d43&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307130.jpg?k=3d4298ab6ae3fc693a167fdbf23343853cc3c3b3c0b81c9c8315279184954fc7&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307129.jpg?k=3fad450055961b9e8f1720b6003f29793805ff8db369de3c2fdd265ce58e7eda&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307132.jpg?k=fb3a23fda00d90c816568c96c1b20b43425c498ae624757980623e386fe9154d&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307136.jpg?k=86ae6adfa2818cc246f7da920037dd4fe9c67420895f7f6fb725240de253bacd&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307143.jpg?k=6d78886206613ba07957e6ca97b3abce3417be0764b9cd541608aaf83d6da20d&o="
      ],
      "link_booking": "https://www.booking.com/hotel/ar/casa-otto-san-carlos-de-bariloche.es.html?aid=318615&label=New_Spanish_ES_AR_20153585425-GWTHed724d1h_zm02RA3wQSM640819080360%3Apl%3Ata%3Ap1%3Ap2%3Aac%3Aap%3Aneg&sid=3b446c2c87314a5f3477421be481218c&activeTab=main&dest_id=-1012061&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=17&hpos=17&nflt=roomfacility%3D81&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1750636504&srpvid=befca7dc7c010093&type=total&ucfs=1&",
      "precio": 90000,
      "amenities": [
        "Parking gratis",
        "WiFi gratis",
        "Barbacoa",
        "Jardín"
      ]
    },
    {
      "tipo": "departamento",
      "titulo": "Casa Bamba",
      "descripcion": "Casa Bamba, que cuenta con vistas a la ciudad, dispone de alojamiento con patio y hervidor, y está a unos 2,4 km de Centro Cívico. El alojamiento, que se encuentra a 2,2 km de Playa del Centro, ofrece jardín y parking privado gratis.\n\nLa casa o chalet de 2 dormitorios cuenta con cocina con nevera y horno, y 2 baños con bidet y ducha. Se ofrece TV de pantalla plana, además de reproductor de CD.\n\nSerena Bay está a 11 km del alojamiento, y Parque Nahuelito está a 23 km. El aeropuerto (Aeropuerto San Carlos de Bariloche) está a 16 km.",
      "ubicacion": {
        "latitud": -41.140112,
        "longitud": -71.323941
      },
      "direccion": "1038 Luisa G. de Runge, 8400 San Carlos de Bariloche, Argentina",
      "imagenes": [
        "https://cf.bstatic.com/xdata/images/hotel/max1024x768/417294725.jpg?k=4609b81cfa2446933733b45cbdd2d06407a9edac2801935ce2a06ec7f2aab1f8&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307135.jpg?k=e90fd3325921718216fc2a5bdceaad19fa5d86e57efb519c1ce823522e358d43&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307130.jpg?k=3d4298ab6ae3fc693a167fdbf23343853cc3c3b3c0b81c9c8315279184954fc7&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307129.jpg?k=3fad450055961b9e8f1720b6003f29793805ff8db369de3c2fdd265ce58e7eda&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307132.jpg?k=fb3a23fda00d90c816568c96c1b20b43425c498ae624757980623e386fe9154d&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307136.jpg?k=86ae6adfa2818cc246f7da920037dd4fe9c67420895f7f6fb725240de253bacd&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307143.jpg?k=6d78886206613ba07957e6ca97b3abce3417be0764b9cd541608aaf83d6da20d&o="
      ],
      "link_booking": "https://www.booking.com/hotel/ar/casa-otto-san-carlos-de-bariloche.es.html?aid=318615&label=New_Spanish_ES_AR_20153585425-GWTHed724d1h_zm02RA3wQSM640819080360%3Apl%3Ata%3Ap1%3Ap2%3Aac%3Aap%3Aneg&sid=3b446c2c87314a5f3477421be481218c&activeTab=main&dest_id=-1012061&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=17&hpos=17&nflt=roomfacility%3D81&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1750636504&srpvid=befca7dc7c010093&type=total&ucfs=1&",
      "precio": 90000,
      "amenities": [
        "Parking gratis",
        "WiFi gratis",
        "Barbacoa",
        "Jardín"
      ]
    },
    {
      "tipo": "departamento",
      "titulo": "Casa Bamba",
      "descripcion": "Casa Bamba, que cuenta con vistas a la ciudad, dispone de alojamiento con patio y hervidor, y está a unos 2,4 km de Centro Cívico. El alojamiento, que se encuentra a 2,2 km de Playa del Centro, ofrece jardín y parking privado gratis.\n\nLa casa o chalet de 2 dormitorios cuenta con cocina con nevera y horno, y 2 baños con bidet y ducha. Se ofrece TV de pantalla plana, además de reproductor de CD.\n\nSerena Bay está a 11 km del alojamiento, y Parque Nahuelito está a 23 km. El aeropuerto (Aeropuerto San Carlos de Bariloche) está a 16 km.",
      "ubicacion": {
        "latitud": -41.140112,
        "longitud": -71.323941
      },
      "direccion": "1038 Luisa G. de Runge, 8400 San Carlos de Bariloche, Argentina",
      "imagenes": [
        "https://cf.bstatic.com/xdata/images/hotel/max1024x768/417294725.jpg?k=4609b81cfa2446933733b45cbdd2d06407a9edac2801935ce2a06ec7f2aab1f8&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307135.jpg?k=e90fd3325921718216fc2a5bdceaad19fa5d86e57efb519c1ce823522e358d43&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307130.jpg?k=3d4298ab6ae3fc693a167fdbf23343853cc3c3b3c0b81c9c8315279184954fc7&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307129.jpg?k=3fad450055961b9e8f1720b6003f29793805ff8db369de3c2fdd265ce58e7eda&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307132.jpg?k=fb3a23fda00d90c816568c96c1b20b43425c498ae624757980623e386fe9154d&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307136.jpg?k=86ae6adfa2818cc246f7da920037dd4fe9c67420895f7f6fb725240de253bacd&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307143.jpg?k=6d78886206613ba07957e6ca97b3abce3417be0764b9cd541608aaf83d6da20d&o="
      ],
      "link_booking": "https://www.booking.com/hotel/ar/casa-otto-san-carlos-de-bariloche.es.html?aid=318615&label=New_Spanish_ES_AR_20153585425-GWTHed724d1h_zm02RA3wQSM640819080360%3Apl%3Ata%3Ap1%3Ap2%3Aac%3Aap%3Aneg&sid=3b446c2c87314a5f3477421be481218c&activeTab=main&dest_id=-1012061&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=17&hpos=17&nflt=roomfacility%3D81&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1750636504&srpvid=befca7dc7c010093&type=total&ucfs=1&",
      "precio": 90000,
      "amenities": [
        "Parking gratis",
        "WiFi gratis",
        "Barbacoa",
        "Jardín"
      ]
    },
    {
      "tipo": "departamento",
      "titulo": "Casa Bamba",
      "descripcion": "Casa Bamba, que cuenta con vistas a la ciudad, dispone de alojamiento con patio y hervidor, y está a unos 2,4 km de Centro Cívico. El alojamiento, que se encuentra a 2,2 km de Playa del Centro, ofrece jardín y parking privado gratis.\n\nLa casa o chalet de 2 dormitorios cuenta con cocina con nevera y horno, y 2 baños con bidet y ducha. Se ofrece TV de pantalla plana, además de reproductor de CD.\n\nSerena Bay está a 11 km del alojamiento, y Parque Nahuelito está a 23 km. El aeropuerto (Aeropuerto San Carlos de Bariloche) está a 16 km.",
      "ubicacion": {
        "latitud": -41.140112,
        "longitud": -71.323941
      },
      "direccion": "1038 Luisa G. de Runge, 8400 San Carlos de Bariloche, Argentina",
      "imagenes": [
        "https://cf.bstatic.com/xdata/images/hotel/max1024x768/417294725.jpg?k=4609b81cfa2446933733b45cbdd2d06407a9edac2801935ce2a06ec7f2aab1f8&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307135.jpg?k=e90fd3325921718216fc2a5bdceaad19fa5d86e57efb519c1ce823522e358d43&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307130.jpg?k=3d4298ab6ae3fc693a167fdbf23343853cc3c3b3c0b81c9c8315279184954fc7&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307129.jpg?k=3fad450055961b9e8f1720b6003f29793805ff8db369de3c2fdd265ce58e7eda&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307132.jpg?k=fb3a23fda00d90c816568c96c1b20b43425c498ae624757980623e386fe9154d&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307136.jpg?k=86ae6adfa2818cc246f7da920037dd4fe9c67420895f7f6fb725240de253bacd&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307143.jpg?k=6d78886206613ba07957e6ca97b3abce3417be0764b9cd541608aaf83d6da20d&o="
      ],
      "link_booking": "https://www.booking.com/hotel/ar/casa-otto-san-carlos-de-bariloche.es.html?aid=318615&label=New_Spanish_ES_AR_20153585425-GWTHed724d1h_zm02RA3wQSM640819080360%3Apl%3Ata%3Ap1%3Ap2%3Aac%3Aap%3Aneg&sid=3b446c2c87314a5f3477421be481218c&activeTab=main&dest_id=-1012061&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=17&hpos=17&nflt=roomfacility%3D81&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1750636504&srpvid=befca7dc7c010093&type=total&ucfs=1&",
      "precio": 90000,
      "amenities": [
        "Parking gratis",
        "WiFi gratis",
        "Barbacoa",
        "Jardín"
      ]
    },
    {
      "tipo": "cabaña",
      "titulo": "Casa Bamba",
      "descripcion": "Casa Bamba, que cuenta con vistas a la ciudad, dispone de alojamiento con patio y hervidor, y está a unos 2,4 km de Centro Cívico. El alojamiento, que se encuentra a 2,2 km de Playa del Centro, ofrece jardín y parking privado gratis.\n\nLa casa o chalet de 2 dormitorios cuenta con cocina con nevera y horno, y 2 baños con bidet y ducha. Se ofrece TV de pantalla plana, además de reproductor de CD.\n\nSerena Bay está a 11 km del alojamiento, y Parque Nahuelito está a 23 km. El aeropuerto (Aeropuerto San Carlos de Bariloche) está a 16 km.",
      "ubicacion": {
        "latitud": -41.140112,
        "longitud": -71.323941
      },
      "direccion": "1038 Luisa G. de Runge, 8400 San Carlos de Bariloche, Argentina",
      "imagenes": [
        "https://cf.bstatic.com/xdata/images/hotel/max1024x768/417294725.jpg?k=4609b81cfa2446933733b45cbdd2d06407a9edac2801935ce2a06ec7f2aab1f8&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307135.jpg?k=e90fd3325921718216fc2a5bdceaad19fa5d86e57efb519c1ce823522e358d43&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307130.jpg?k=3d4298ab6ae3fc693a167fdbf23343853cc3c3b3c0b81c9c8315279184954fc7&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307129.jpg?k=3fad450055961b9e8f1720b6003f29793805ff8db369de3c2fdd265ce58e7eda&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307132.jpg?k=fb3a23fda00d90c816568c96c1b20b43425c498ae624757980623e386fe9154d&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307136.jpg?k=86ae6adfa2818cc246f7da920037dd4fe9c67420895f7f6fb725240de253bacd&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307143.jpg?k=6d78886206613ba07957e6ca97b3abce3417be0764b9cd541608aaf83d6da20d&o="
      ],
      "link_booking": "https://www.booking.com/hotel/ar/casa-otto-san-carlos-de-bariloche.es.html?aid=318615&label=New_Spanish_ES_AR_20153585425-GWTHed724d1h_zm02RA3wQSM640819080360%3Apl%3Ata%3Ap1%3Ap2%3Aac%3Aap%3Aneg&sid=3b446c2c87314a5f3477421be481218c&activeTab=main&dest_id=-1012061&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=17&hpos=17&nflt=roomfacility%3D81&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1750636504&srpvid=befca7dc7c010093&type=total&ucfs=1&",
      "precio": 90000,
      "amenities": [
        "Parking gratis",
        "WiFi gratis",
        "Barbacoa",
        "Jardín"
      ]
    },
    {
      "tipo": "cabaña",
      "titulo": "Casa Bamba",
      "descripcion": "Casa Bamba, que cuenta con vistas a la ciudad, dispone de alojamiento con patio y hervidor, y está a unos 2,4 km de Centro Cívico. El alojamiento, que se encuentra a 2,2 km de Playa del Centro, ofrece jardín y parking privado gratis.\n\nLa casa o chalet de 2 dormitorios cuenta con cocina con nevera y horno, y 2 baños con bidet y ducha. Se ofrece TV de pantalla plana, además de reproductor de CD.\n\nSerena Bay está a 11 km del alojamiento, y Parque Nahuelito está a 23 km. El aeropuerto (Aeropuerto San Carlos de Bariloche) está a 16 km.",
      "ubicacion": {
        "latitud": -41.140112,
        "longitud": -71.323941
      },
      "direccion": "1038 Luisa G. de Runge, 8400 San Carlos de Bariloche, Argentina",
      "imagenes": [
        "https://cf.bstatic.com/xdata/images/hotel/max1024x768/417294725.jpg?k=4609b81cfa2446933733b45cbdd2d06407a9edac2801935ce2a06ec7f2aab1f8&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307135.jpg?k=e90fd3325921718216fc2a5bdceaad19fa5d86e57efb519c1ce823522e358d43&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307130.jpg?k=3d4298ab6ae3fc693a167fdbf23343853cc3c3b3c0b81c9c8315279184954fc7&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307129.jpg?k=3fad450055961b9e8f1720b6003f29793805ff8db369de3c2fdd265ce58e7eda&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307132.jpg?k=fb3a23fda00d90c816568c96c1b20b43425c498ae624757980623e386fe9154d&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307136.jpg?k=86ae6adfa2818cc246f7da920037dd4fe9c67420895f7f6fb725240de253bacd&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307143.jpg?k=6d78886206613ba07957e6ca97b3abce3417be0764b9cd541608aaf83d6da20d&o="
      ],
      "link_booking": "https://www.booking.com/hotel/ar/casa-otto-san-carlos-de-bariloche.es.html?aid=318615&label=New_Spanish_ES_AR_20153585425-GWTHed724d1h_zm02RA3wQSM640819080360%3Apl%3Ata%3Ap1%3Ap2%3Aac%3Aap%3Aneg&sid=3b446c2c87314a5f3477421be481218c&activeTab=main&dest_id=-1012061&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=17&hpos=17&nflt=roomfacility%3D81&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1750636504&srpvid=befca7dc7c010093&type=total&ucfs=1&",
      "precio": 90000,
      "amenities": [
        "Parking gratis",
        "WiFi gratis",
        "Barbacoa",
        "Jardín"
      ]
    },
    {
      "tipo": "departamento",
      "titulo": "Casa Bamba",
      "descripcion": "Casa Bamba, que cuenta con vistas a la ciudad, dispone de alojamiento con patio y hervidor, y está a unos 2,4 km de Centro Cívico. El alojamiento, que se encuentra a 2,2 km de Playa del Centro, ofrece jardín y parking privado gratis.\n\nLa casa o chalet de 2 dormitorios cuenta con cocina con nevera y horno, y 2 baños con bidet y ducha. Se ofrece TV de pantalla plana, además de reproductor de CD.\n\nSerena Bay está a 11 km del alojamiento, y Parque Nahuelito está a 23 km. El aeropuerto (Aeropuerto San Carlos de Bariloche) está a 16 km.",
      "ubicacion": {
        "latitud": -41.140112,
        "longitud": -71.323941
      },
      "direccion": "1038 Luisa G. de Runge, 8400 San Carlos de Bariloche, Argentina",
      "imagenes": [
        "https://cf.bstatic.com/xdata/images/hotel/max1024x768/417294725.jpg?k=4609b81cfa2446933733b45cbdd2d06407a9edac2801935ce2a06ec7f2aab1f8&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307135.jpg?k=e90fd3325921718216fc2a5bdceaad19fa5d86e57efb519c1ce823522e358d43&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max500/408307130.jpg?k=3d4298ab6ae3fc693a167fdbf23343853cc3c3b3c0b81c9c8315279184954fc7&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307129.jpg?k=3fad450055961b9e8f1720b6003f29793805ff8db369de3c2fdd265ce58e7eda&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307132.jpg?k=fb3a23fda00d90c816568c96c1b20b43425c498ae624757980623e386fe9154d&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307136.jpg?k=86ae6adfa2818cc246f7da920037dd4fe9c67420895f7f6fb725240de253bacd&o=",
        "https://cf.bstatic.com/xdata/images/hotel/max300/408307143.jpg?k=6d78886206613ba07957e6ca97b3abce3417be0764b9cd541608aaf83d6da20d&o="
      ],
      "link_booking": "https://www.booking.com/hotel/ar/casa-otto-san-carlos-de-bariloche.es.html?aid=318615&label=New_Spanish_ES_AR_20153585425-GWTHed724d1h_zm02RA3wQSM640819080360%3Apl%3Ata%3Ap1%3Ap2%3Aac%3Aap%3Aneg&sid=3b446c2c87314a5f3477421be481218c&activeTab=main&dest_id=-1012061&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=17&hpos=17&nflt=roomfacility%3D81&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1750636504&srpvid=befca7dc7c010093&type=total&ucfs=1&",
      "precio": 90000,
      "amenities": [
        "Parking gratis",
        "WiFi gratis",
        "Barbacoa",
        "Jardín"
      ]
    }
  ]
};

        const propiedades = datos.propiedades;
        const galeria = document.getElementById("galeria");
        let currentMap = null; // Variable para almacenar la instancia del mapa Leaflet
        let currentSlide = 0; // Para el carrusel
        let totalSlides = 0; // Para el carrusel


        function formatPrice(price) {
            // Se asume moneda local ARS (Argentina)
            return new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS', minimumFractionDigits: 0 }).format(price);
        }

        function crearCard(prop, i) {
            const card = document.createElement("div");
            card.className = "card";

            const precioOriginal = prop.precio;
            const precioConDescuento = precioOriginal * 0.70; // 30% de descuento
            const precioOriginalFormateado = formatPrice(precioOriginal);
            const precioConDescuentoFormateado = formatPrice(precioConDescuento);

            card.innerHTML = `
                <img src="${prop.imagenes[0]}" alt="${prop.titulo}">
                <div class="card-body">
                    <div>
                        <h3>${prop.titulo}</h3>
                        <p>${prop.descripcion.substring(0, 120)}...</p>
                        <div class="price-info">
                            <span class="old-price">${precioOriginalFormateado}</span>
                            <span class="current-price">${precioConDescuentoFormateado} (30% OFF)</span>
                        </div>
                    </div>
                    <button onclick="verDetalle(${i})">Ver más</button>
                </div>`;
            return card;
        }

        function renderGaleria(filtro) {
            galeria.innerHTML = "";
            const buttons = document.querySelectorAll('nav button');
            buttons.forEach(button => button.classList.remove('active'));

            propiedades.forEach((prop, i) => {
                if (prop.tipo === filtro) {
                    galeria.appendChild(crearCard(prop, i));
                }
            });

            const activeButton = document.getElementById(`btn-${filtro}`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
        }

        function verDetalle(i) {
            const prop = propiedades[i];
            const modal = document.getElementById("modal");
            const body = document.getElementById("modal-body");
            
            // Generar el HTML del carrusel
            const carouselItemsHtml = prop.imagenes.map(src => `
                <div class="carousel-item">
                    <img src="${src}" alt="${prop.titulo}">
                </div>
            `).join('');

            const amenities = prop.amenities.map(am => `<li>${am}</li>`).join('');
            const mensaje = encodeURIComponent(`Hola! Estoy interesado en la propiedad: ${prop.titulo}. ¿Me puedes dar más información sobre ella?`);

            const precioOriginal = prop.precio;
            const precioConDescuento = precioOriginal * 0.70; // 30% de descuento
            const precioOriginalFormateado = formatPrice(precioOriginal);
            const precioConDescuentoFormateado = formatPrice(precioConDescuento);

            body.innerHTML = `
                <h2>${prop.titulo}</h2>
                <p><strong>Dirección:</strong> ${prop.direccion}</p>
                <div class="price-info">
                    <span class="old-price">${precioOriginalFormateado}</span>
                    <span class="current-price">${precioConDescuentoFormateado} (30% OFF)</span>
                </div>
                
                <div class="carousel-container">
                    <div class="carousel-inner" id="carouselInner">
                        ${carouselItemsHtml}
                    </div>
                    <button class="carousel-control prev" onclick="moveSlide(-1)">&#10094;</button>
                    <button class="carousel-control next" onclick="moveSlide(1)">&#10095;</button>
                </div>

                <p>${prop.descripcion}</p>
                <h3>Comodidades:</h3>
                <ul class="amenities">${amenities}</ul>
                <div id="mapaModal"></div> <div class="modal-links">
                    <a href="${prop.link_booking}" target="_blank">Ver disponibilidad en Booking</a>
                    <a href="https://wa.me/${datos.contacto.whatsapp}?text=${mensaje}" target="_blank">Reservar o consultar por WhatsApp</a>
                </div>
            `;
            
            // Mostrar el modal y activar la transición
            modal.style.display = "flex";
            setTimeout(() => {
                modal.classList.add('is-open');
            }, 10); 

            // Inicializar el carrusel
            currentSlide = 0;
            totalSlides = prop.imagenes.length;
            showSlide(currentSlide);

            // Inicializar el mapa Leaflet DENTRO del modal una vez que esté visible
            setTimeout(() => {
                if (currentMap) {
                    currentMap.remove();
                    currentMap = null;
                }

                const lat = prop.ubicacion.latitud;
                const lon = prop.ubicacion.longitud;
                
                const mapaContainer = document.getElementById('mapaModal');
                if (mapaContainer) {
                    currentMap = L.map('mapaModal').setView([lat, lon], 15);

                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                    }).addTo(currentMap);

                    L.marker([lat, lon]).addTo(currentMap)
                        .bindPopup(`<b>${prop.titulo}</b><br>${prop.direccion}`).openPopup();

                    currentMap.invalidateSize();
                }
            }, 150); 
        }

        // Funciones para el carrusel
        function showSlide(index) {
            const carouselInner = document.getElementById('carouselInner');
            if (!carouselInner) return; // Salir si el carrusel no está visible

            if (index >= totalSlides) {
                currentSlide = 0;
            } else if (index < 0) {
                currentSlide = totalSlides - 1;
            } else {
                currentSlide = index;
            }
            carouselInner.style.transform = `translateX(-${currentSlide * 100}%)`;
        }

        function moveSlide(direction) {
            showSlide(currentSlide + direction);
        }


        function cerrarModal(e) {
            // Cierra el modal si se hace clic fuera del contenido o en el botón "X"
            if (e.target.id === 'modal' || e.target.classList.contains('close-button')) {
                const modal = document.getElementById('modal');
                modal.classList.remove('is-open');
                // Esperar a que termine la transición de opacidad antes de ocultar completamente
                modal.addEventListener('transitionend', function handler() {
                    modal.style.display = 'none';
                    modal.removeEventListener('transitionend', handler);
                    if (currentMap) {
                        currentMap.remove();
                        currentMap = null;
                    }
                });
            }
        }

        // Función específica para el botón "x"
        function cerrarModalManual() {
            const modal = document.getElementById('modal');
            modal.classList.remove('is-open');
            modal.addEventListener('transitionend', function handler() {
                modal.style.display = 'none';
                modal.removeEventListener('transitionend', handler);
                if (currentMap) {
                    currentMap.remove();
                    currentMap = null;
                }
            });
        }


        function filtrar(tipo) {
            renderGaleria(tipo);
        }

        // Cargar por defecto los departamentos al inicio y activar el botón
        document.addEventListener('DOMContentLoaded', () => {
            filtrar('departamento');
        });
    </script>
</body>
</html>
